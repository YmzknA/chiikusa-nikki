<div class="min-h-screen p-2 sm:p-4 animate-[fadeIn_0.5s_ease-out]">
  <!-- Flash Messages Area -->
  <div id="flash-messages">
    <%= render 'shared/flash', flash: flash %>
  </div>

  <!-- Mobile Header with Logo -->
  <div class="relative z-10 sm:hidden neuro-card p-4 mb-4 flex justify-center items-center animate-[fadeInDown_0.6s_ease-out]">
    <%= link_to root_path do %>
      <%= image_tag "logo.png", alt: "Neuro Logo", class: "h-10 w-auto transition-all duration-200 hover:scale-110" %>
    <% end %>
    <div class="h-10 flex items-center ml-3">
      <%= render 'shared/watering' %>
    </div>
  </div>

  <!-- Navigation Header -->
  <div class="flex justify-between items-center mb-4 animate-[slideInLeft_0.5s_ease-out_0.2s_both]">
    <div class="tabs tabs-box tabs-sm" aria-label="日記表示切り替え">
      <%= link_to diaries_path, class: "tab tab-active" do %>
        📅 カレンダー
      <% end %>
      <%= link_to diary_lists_path, class: "tab" do %>
        📋 リスト
      <% end %>
    </div>
  </div>

  <!-- Calendar View -->
  <div class="neuro-card p-3 sm:p-6 overflow-hidden animate-[scaleIn_0.4s]">
    <%= month_calendar(events: @diaries, attribute: :date, class: "table table-fixed w-full") do |date, diaries| %>
      <div class="neuro-calendar-cell py-2 sm:py-3 px-1 sm:px-2 min-h-[50px] sm:min-h-[60px] md:min-h-[80px] relative">
        <div class="text-xs sm:text-sm text-base-content/60 mb-1"><%= date.day %></div>

        <% if diaries.any? %>
          <% diary = diaries.first %>
          <%= link_to diary_path(diary) do %>
            <div class="w-full h-full flex items-center justify-center hover:scale-110 transition-transform">
              <%= render "diaries/weed", diary: diary %>
            </div>
          <% end %>
        <% else %>
          <%= link_to new_diary_path(date: date) do %>
            <div class="w-full h-full flex items-center justify-center hover:scale-110 transition-all duration-200">
              <div class="mask mask-hexagon-2 size-3 sm:size-5 md:size-8 flex items-center justify-center"> 
                <div class="size-full bg-base-300">
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if @diaries.empty? %>
    <div class="neuro-card p-6 md:p-8 text-center animate-[scaleIn_0.4s_ease-out] mt-6">
      <h2 class="text-lg md:text-xl font-bold text-base-content mb-2">日記がありません</h2>
      <p class="text-sm md:text-base text-base-content/60">まだ日記を書いていません。最初の日記を書いてみましょう。</p>
      <%= link_to new_diary_path, class: "neuro-button py-2 px-4 text-sm font-medium mt-4 inline-block transition-all duration-200 hover:scale-105 hover:animate-[wiggle_0.5s_ease-in-out]" do %>
        日記を書く
      <% end %>
    </div>
  <% end %>
</div>
