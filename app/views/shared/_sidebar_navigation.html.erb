<!-- PC Sidebar Navigation -->
<div class="hidden sm:block fixed left-0 top-0 h-full w-64 neuro-sidebar rounded-r border-r border-base-300 z-40">
  <div class="flex flex-col h-full">
    <!-- Header -->
    <%= loading_link_to root_path, class: "p-6 flex items-center justify-center gap-2" do %>
      <h1 class="text-2xl font-bold stick-regular">ちいくさ日記</h1>
    <% end %>

    <div class="flex items-center justify-center gap-3 sm:gap-6">
      <%= image_tag "logo.png", alt: "Neuro Logo", class: "h-8" %>
      <div class="">
        <%= render 'shared/watering' %>
      </div>
    </div>


    <div class="divider my-2"></div>

    <!-- Navigation Links -->
    <nav class="flex-1 p-4">
      <div class="space-y-2">
        <%= loading_link_to diaries_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if controller_name == 'diaries' && action_name == 'index'}", data: { turbo_action: "replace" } do %>
          <span class="material-symbols-outlined">
            calendar_month
          </span>
          <span>日記カレンダー</span>
        <% end %>

        <%= loading_link_to stats_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(stats_path)}" do %>
          <span class="material-symbols-outlined">
            bar_chart
          </span>
          <span>統計</span>
        <% end %>

        <%= loading_link_to public_diaries_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(public_diaries_path)}" do %>
          <span class="material-symbols-outlined">
            public
          </span>
          <span>公開日記</span>
        <% end %>

        <%= loading_link_to profile_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(profile_path)}" do %>
          <svg class="size-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
          <span>アカウント</span>
        <% end %>

        <%= loading_link_to tutorial_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(tutorial_path)}" do %>
          <span class="material-symbols-outlined">
            help
          </span>
          <span>使い方</span>
        <% end %>


        <div class="divider my-2"></div>

        <%= loading_link_to new_diary_path, class: "flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if controller_name == 'diaries' && action_name == 'new'}" do %>
          <svg class="size-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          <span>日記作成</span>
        <% end %>

      </div>
    </nav>

    <!-- Footer with User Info -->
    <div class="p-4 border-t border-base-300">

      <%= loading_link_to privacy_policy_path, class: "text-sm flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(privacy_policy_path)}" do %>
        <span class="material-symbols-outlined">
          privacy_tip
        </span>
        <span>プライバシーポリシー</span>
      <% end %>

      <%= loading_link_to terms_of_service_path, class: "text-sm flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-secondary/10 transition-colors #{'bg-primary/10 text-primary font-semibold' if current_page?(terms_of_service_path)}" do %>
        <span class="material-symbols-outlined">
          gavel
        </span>
        <span>利用規約</span>
      <% end %>
      <div class="divider my-2"></div>

      <% if current_user %>
        <div class="flex items-center gap-3">
        <%= loading_link_to profile_path, class: "flex items-center hover:bg-secondary/10 transition-colors rounded-full" do %>
          <%= avatar_image(current_user, size: 40, css_class: "rounded-full") %>
        <% end %>
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium truncate"><%= current_user.username %></p>
            <p class="text-xs text-base-content/70 flex">
            タネ
            <%= image_tag "logo.png", alt: "Neuro Logo", class: "h-4 mr-1" %>:
            <%= current_user.seed_count %>/5</p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
